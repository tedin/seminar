<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>
<h1><%= title %></h1>
<p>Welcome to <%= title %></p>
<h3>My Google Maps Demo</h3>
<!--<div id="map"></div>
<script>
    function initMap() {
        var uluru = {lat: 43.8538258, lng: 18.3947093};
        var noviMarker = {lat: 44.202443, lng: 17.8979633};
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 4,
            center: uluru
        });
        var marker = new google.maps.Marker({
            position: uluru,
            map: map
        });
        var marker2 = new google.maps.Marker({
            position: noviMarker,
            map : map
        });
        google.maps.event.addListener(map,'click',function (event) {
            placeMarker(event.latlng);

        });

        function placeMarker(location){
            var marker = new google.map.marker({
                position :location,
                map: map
            });
        }
    }
</script>-->
<div id="map"></div>
<script>
    // Note: This example requires that you consent to location sharing when
    // prompted by your browser. If you see the error "The Geolocation service
    // failed.", it means you probably did not give permission for the browser to
    // locate you.
    var markeri = [];
    /*var i = 0;
    var temp = 0.000100;
    function iscrtajMarkere(marker, brojac, temp)
    {
        marker[i] = new google.maps.Marker({
            position: {lat:(43.855437+temp), lng:(18.408196+temp)},
            map: map
        });
        temp += 0.000100;
        brojac++;

    }*/
    function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: -34.397, lng: 150.644},
            zoom: 12
        });
        var infoWindow = new google.maps.InfoWindow({map: map});
        var mojaLokacija;
        // Try HTML5 geolocation.
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var pos = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                mojaLokacija = pos;
                /*infoWindow.setPosition(pos);
                infoWindow.setContent('Vasa lokacija.');*/
                var marker = new google.maps.Marker({
                    position: pos,
                    map: map
                });
                var temp = 0.000100;
                var temp2 = 0.000300;
                for(i = 1; i <= 10; i++)
                {

                    markeri[i] = new google.maps.Marker({
                        position: {lat:(43.855437+temp), lng:(18.408196+temp2)},
                        map: map
                    });
                    temp += 0.000100;
                    temp2 += 0.0001300;
                    //setTimeout(3000);
                }
                //setInterval(iscrtajMarkere(markeri, i, temp), 3000);
                map.setCenter(pos);
            }, function() {
                handleLocationError(true, infoWindow, map.getCenter());
            });
        } else {
            // Browser doesn't support Geolocation
            handleLocationError(false, infoWindow, map.getCenter());
        }
    }

    function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                'Error: The Geolocation service failed.' :
                'Error: Your browser doesn\'t support geolocation.');
    }
</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDVdH8NKF8NQjTYkSN_MzbDWSMxxt8Q3pQ&callback=initMap">
</script>
</body>
</html>
